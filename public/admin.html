<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Admin - Centro de Autoacceso</title>

<!-- Estilos -->
<link rel="stylesheet" href="styles.css">
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f4f6f9; color:#333; }
header { background:#0c2340; color:white; padding:15px 0; text-align:center; }
main { padding:20px; max-width:1300px; margin:auto; }
.filtro { margin-bottom:25px; display:flex; gap:15px; flex-wrap:wrap; align-items:center; }
.filtro label { font-weight:600; }
.filtro input, .filtro select, .filtro button { padding:6px 10px; border-radius:5px; border:1px solid #ccc; cursor:pointer; }
.grafico-seccion { margin-bottom:50px; background:white; padding:15px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.1); }
.grafico-seccion h2 { margin-top:0; font-size:1.2em; color:#0c2340; }
.graficos-container { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
.grafico-container { background:white; padding:10px; border-radius:12px; box-shadow:0 3px 8px rgba(0,0,0,0.05); flex:1 1 400px; min-width:300px; max-width:500px; }
canvas { max-height:350px; }
button#btnCargar { background:#0c2340; color:white; border:none; }
button#btnCargar:hover { background:#193763; }
button#btnExport { background:#ff6d6d; color:white; border:none; margin-top:10px; padding:8px 12px; border-radius:6px; }
button#btnExport:hover { background:#ff4d4d; }
#resumenGlobal { background:#e0f7fa; padding:15px; border-radius:10px; margin-bottom:20px; font-weight:600; color:#006064; }
.resumen-local { background:#fff8e1; padding:10px; border-radius:8px; margin:10px 0; font-size:0.9em; color:#8b6b00; }

/* Mapa de calor */
#heatmap { display: grid; grid-template-columns: repeat(24, 1fr); gap: 1px; margin-top: 10px; }
.heat-cell { width: 100%; aspect-ratio: 1; background: #e0e0e0; border-radius: 3px; transition: background 0.3s; }
.heat-legend { display: flex; justify-content: space-between; font-size: 0.8em; margin-top: 5px; }

/* Nueva sección de actividad dinámica */
#actividad { margin-left:10px; }
</style>

<!-- Librerías -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

<header>
  <h1>Panel Admin - Estadísticas de Asistencia</h1>
</header>

<main>
  <div class="filtro">
    <label for="sala">Sala:</label>
    <select id="sala">
      <option value="">Todas</option>
      <option>Medios Digitales</option>
      <option>Ludoteca</option>
      <option>Diagnósticos</option>
      <option>Lecto escritura</option>
      <option>Sala de internet</option>
      <option>Len 7</option>
    </select>

    <label for="actividad">Actividad:</label>
    <select id="actividad">
      <option value="">Todas</option>
      <!-- Se llenará dinámicamente según la sala -->
    </select>

    <label for="desde">Desde:</label>
    <input type="date" id="desde">

    <label for="hasta">Hasta:</label>
    <input type="date" id="hasta">

    <button id="btnCargar">Cargar Estadísticas</button>
    <button id="btnExport">Descargar Excel</button>
  </div>

  <!-- Resumen global -->
  <div id="resumenGlobal"></div>

  <!-- Contenedor de estadísticas -->
  <div id="estadisticas">

    <!-- Actividades -->
    <section class="grafico-seccion">
      <h2>Distribución de Actividades</h2>
      <div class="resumen-local" id="resumenActividades"></div>
      <div class="graficos-container">
        <div class="grafico-container"><canvas id="graficoActividades"></canvas></div>
      </div>
    </section>

    <!-- Registros por hora -->
    <section class="grafico-seccion">
      <h2>Registros por Hora</h2>
      <div class="resumen-local" id="resumenHora"></div>
      <div class="graficos-container">
        <div class="grafico-container"><canvas id="graficoHora"></canvas></div>
      </div>
    </section>

    <!-- Registros por día -->
    <section class="grafico-seccion">
      <h2>Registros por Día</h2>
      <div class="resumen-local" id="resumenDia"></div>
      <div class="graficos-container">
        <div class="grafico-container"><canvas id="graficoDia"></canvas></div>
      </div>
    </section>

    <!-- Mapa de calor -->
    <section class="grafico-seccion">
      <h2>Mapa de Calor - Actividad por Día y Hora</h2>
      <div class="resumen-local" id="resumenHeatmap"></div>
      <div id="heatmap"></div>
      <div class="heat-legend">
        <span>Bajo</span><span>Medio</span><span>Alto</span>
      </div>
    </section>

  </div>
</main>

<script src="admin.js"></script>

</body>
</html>
